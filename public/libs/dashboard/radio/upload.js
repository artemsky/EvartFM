$(function(){"use strict";var e=document.querySelector("#template");e.id="";var t=e.parentNode.innerHTML;e.parentNode.removeChild(e);var n=$("#total-progress"),i=new Dropzone($("html").get(0),{url:e.getAttribute("data-url"),maxFilesize:300,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},thumbnailWidth:80,thumbnailHeight:80,acceptedFiles:".mp3",parallelUploads:20,previewTemplate:t,autoQueue:!1,previewsContainer:"#previews",clickable:".fileinput-button"});i.on("addedfile",function(e){$(e.previewElement).find(".start").on("click",function(){i.enqueueFile(e)})}),i.on("totaluploadprogress",function(e){$(".progress-striped").css("display","block"),n.find(".progress-bar").css("width",e+"%")}),i.on("sending",function(e){n.css("opacity","1"),e.previewElement.querySelector(".start").setAttribute("disabled","disabled")}),i.on("queuecomplete",function(e){n.css("opacity","0"),n.find(".progress-bar").css("width","0%")}),i.on("success",function(e){var t=$(e.previewElement);t.css({backgroundColor:"#c4f1c4",borderRadius:"5px",padding:"5px 1em 0"}),t.find(".progress").parent().remove(),t.find(".preview").html("").addClass("glyphicon glyphicon-ok text-success").removeClass("preview"),t.find("button").parent().remove()}),$("#actions .start").on("click",function(){i.enqueueFiles(i.getFilesWithStatus(Dropzone.ADDED))}),$("#actions .cancel").on("click",function(){i.removeAllFiles(!0)})});