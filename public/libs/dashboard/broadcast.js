var APPLICATION=APPLICATION||{};APPLICATION.Broadcasting=new function(){"use strict";var t=this;t.Global=new function(){var t=this;t.RootURL="broadcast/",t.requestOptions={type:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},error:function(t){console.log(t)}}},t.Helper=new function(){var e=this;e.initSortable=function(e,o){var a=!1;e.sortable({items:".item",handle:o,opacity:.8,stop:function(t){$(t.target).find(".item").each(function(t,e){$(e).attr("data-order",t+1).attr("changed","true")})},over:function(){a=!1},out:function(){a=!0},beforeStop:function(o,s){if(1==a){s.item.remove();s.item.attr("data-id");t.Global.forDelete[e.selector.substring(11)].push(s.item.attr("data-id"))}}})},e.ServerStatusCheck=function(){var e=$("#serverStatus"),o=$(".radio-on"),a=$(".radio-off");t.Global.requestOptions.type="GET",t.Global.requestOptions.success=function(t){t?(e.removeClass("text-danger").addClass("text-success"),a.prop("disabled",!1)):(e.removeClass("text-success").addClass("text-danger"),o.prop("disabled",!1))},$.ajax(e.attr("data-status-url"),t.Global.requestOptions)},e.getURL=function(){return{"switch":t.Global.RootURL+"switch"}}},t.initRadioControll=new function(){var e=$(".radio-on"),o=$(".radio-off");e.on("click",function(){e.prop("disabled",!0),o.prop("disabled",!0),t.Global.requestOptions.data={action:"on"},t.Global.requestOptions.type="POST",t.Global.requestOptions.success=t.Helper.ServerStatusCheck,$.ajax(t.Helper.getURL()["switch"],t.Global.requestOptions)}),o.on("click",function(){e.prop("disabled",!0),o.prop("disabled",!0),t.Global.requestOptions.data={action:"off"},t.Global.requestOptions.type="POST",t.Global.requestOptions.success=t.Helper.ServerStatusCheck,$.ajax(t.Helper.getURL()["switch"],t.Global.requestOptions)}),$(".radio-refresh").on("click",function(){t.Global.requestOptions.data={action:"refresh"},t.Global.requestOptions.type="POST",$.ajax(t.Helper.getURL()["switch"],t.Global.requestOptions)}),$(".radio-next").on("click",function(){t.Global.requestOptions.data={action:"next"},t.Global.requestOptions.type="POST",$.ajax(t.Helper.getURL()["switch"],t.Global.requestOptions)}),t.Helper.ServerStatusCheck(),setInterval(t.Helper.ServerStatusCheck,5e3)}};